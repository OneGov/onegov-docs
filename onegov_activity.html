
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Onegov Activity API &#8212; OneGov Docs 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="onegov-activity-api">
<h1>Onegov Activity API<a class="headerlink" href="#onegov-activity-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-onegov.activity.models.activity">
<span id="models"></span><h2>Models<a class="headerlink" href="#module-onegov.activity.models.activity" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="onegov.activity.models.activity.Activity">
<em class="property">class </em><code class="descclassname">onegov.activity.models.activity.</code><code class="descname">Activity</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/activity.html#Activity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.activity.Activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes an activity that is made available to participants on
certain occasions (i.e. dates).</p>
<p>The activity describes the what’s going on, the occasion describes when
and with whom.</p>
<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.id">
<code class="descname">id</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.id" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal id for references (not public)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.name">
<code class="descname">name</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A nice id for the url, readable by humans</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.title">
<code class="descname">title</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.title" title="Permalink to this definition">¶</a></dt>
<dd><p>The title of the activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.order">
<code class="descname">order</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.order" title="Permalink to this definition">¶</a></dt>
<dd><p>The normalized title for sorting</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.lead">
<code class="descname">lead</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.lead" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the activity briefly</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.text">
<code class="descname">text</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the activity in detail</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.thumbnail">
<code class="descname">thumbnail</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>The thumbnail shown in the overview</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.username">
<code class="descname">username</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.username" title="Permalink to this definition">¶</a></dt>
<dd><p>The user to which this activity belongs to (organiser)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.reporter">
<code class="descname">reporter</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.reporter" title="Permalink to this definition">¶</a></dt>
<dd><p>The user which initially reported this activity (same as username, but
this value may not change after initialisation)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.location">
<code class="descname">location</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.location" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the location of the activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.user">
<code class="descname">user</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.user" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the user linked to this activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.occasions">
<code class="descname">occasions</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.occasions" title="Permalink to this definition">¶</a></dt>
<dd><p>The occasions linked to this activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.type">
<code class="descname">type</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.type" title="Permalink to this definition">¶</a></dt>
<dd><p>the type of the item, this can be used to create custom polymorphic
subclasses of this class. See
<a class="reference external" href="http://docs.sqlalchemy.org/en/improve_toc/ orm/extensions/declarative/inheritance.html">http://docs.sqlalchemy.org/en/improve_toc/ orm/extensions/declarative/inheritance.html</a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.state">
<code class="descname">state</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.state" title="Permalink to this definition">¶</a></dt>
<dd><p>the state of the activity</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-onegov.activity.models.booking"></span><dl class="class">
<dt id="onegov.activity.models.booking.Booking">
<em class="property">class </em><code class="descclassname">onegov.activity.models.booking.</code><code class="descname">Booking</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bookings are created by users for occasions.</p>
<p>Initially, bookings are open. In this state they represent a “wish” rather
than booking.</p>
<p>Because bookings are wishes initially, they get a priority as well as
a group code which links multiple bookings by multiple users together.</p>
<p>They system will try to figure out the best booking using the priority
as well as the group code.</p>
<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.id">
<code class="descname">id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.id" title="Permalink to this definition">¶</a></dt>
<dd><p>the public id of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.username">
<code class="descname">username</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.username" title="Permalink to this definition">¶</a></dt>
<dd><p>the user owning the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.priority">
<code class="descname">priority</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.priority" title="Permalink to this definition">¶</a></dt>
<dd><p>the priority of the booking, a higher number = a higher priority</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.group_code">
<code class="descname">group_code</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.group_code" title="Permalink to this definition">¶</a></dt>
<dd><p>the group code of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.attendee_id">
<code class="descname">attendee_id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.attendee_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the attendee behind this booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.occasion_id">
<code class="descname">occasion_id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.occasion_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the occasion this booking belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.cost">
<code class="descname">cost</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>the cost of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.state">
<code class="descname">state</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.state" title="Permalink to this definition">¶</a></dt>
<dd><p>the state of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.user">
<code class="descname">user</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.user" title="Permalink to this definition">¶</a></dt>
<dd><p>access the user linked to this booking</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.period_bound_booking_state">
<code class="descname">period_bound_booking_state</code><span class="sig-paren">(</span><em>period</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.period_bound_booking_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.period_bound_booking_state" title="Permalink to this definition">¶</a></dt>
<dd><p>During pre-booking we don’t show the actual state of the booking,
unless the occasion was cancelled, otherwise the user might see
accepted bookings at a point where those states are not confirmed yet.</p>
<p>This methods interprets the period/state accordingly.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.provisional_booking_cost">
<code class="descname">provisional_booking_cost</code><span class="sig-paren">(</span><em>period=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.provisional_booking_cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.provisional_booking_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>The costs of the final booking, including the booking costs
of the period (if not all-inclusive).</p>
<p>This cost is written to the booking.cost when the period is
confirmed.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.set_priority_bit">
<code class="descname">set_priority_bit</code><span class="sig-paren">(</span><em>index</em>, <em>bit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.set_priority_bit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.set_priority_bit" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the priority, setting the the nth bit from the right to
the value of <code class="docutils literal"><span class="pre">bit</span></code> (index/n begins at 0).</p>
<p>The first bit (index=0) is reserved for starring/unstarring.
The second bit (index=1) is reserved for nobble/unnobble.</p>
<p>As a result, starring is less influental than locking.</p>
<p>To give some context: Starring is used by the attendees to select
which bookings they favor. Nobbling is used by administrators to force
certain bookings to be preferred.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.star">
<code class="descname">star</code><span class="sig-paren">(</span><em>max_stars=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.star" title="Permalink to this definition">¶</a></dt>
<dd><p>Stars the current booking, up to a limit per period and attendee.</p>
<p>Starring sets the star-bit to 1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if successful (or already set), False if over limit.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-onegov.activity.models.occasion"></span><dl class="class">
<dt id="onegov.activity.models.occasion.Occasion">
<em class="property">class </em><code class="descclassname">onegov.activity.models.occasion.</code><code class="descname">Occasion</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/occasion.html#Occasion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.occasion.Occasion" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes a single occurrence of an Activity. “Occurence” would have
been a good word for it too, but that’s used by onegov.event.</p>
<p>So occasion it is.</p>
<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.id">
<code class="descname">id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.id" title="Permalink to this definition">¶</a></dt>
<dd><p>the public id of this occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.meeting_point">
<code class="descname">meeting_point</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.meeting_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the meeting point of the occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.age">
<code class="descname">age</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.age" title="Permalink to this definition">¶</a></dt>
<dd><p>The expected age of participants</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.spots">
<code class="descname">spots</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.spots" title="Permalink to this definition">¶</a></dt>
<dd><p>The expected number of participants</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.note">
<code class="descname">note</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.note" title="Permalink to this definition">¶</a></dt>
<dd><p>A note about the occurrence</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.cost">
<code class="descname">cost</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>The cost of the occasion (max value is 100‘000.00), the currency is
assumed to be CHF as this system will probably never be used outside
Switzerland</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.activity_id">
<code class="descname">activity_id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.activity_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The activity this occasion belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.period_id">
<code class="descname">period_id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.period_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The period this occasion belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.cancelled">
<code class="descname">cancelled</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.cancelled" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the occasion has been cancelled</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.durations">
<code class="descname">durations</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.durations" title="Permalink to this definition">¶</a></dt>
<dd><p>The durations defined by the associated dates</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.order">
<code class="descname">order</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.order" title="Permalink to this definition">¶</a></dt>
<dd><p>The default order</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.exclude_from_overlap_check">
<code class="descname">exclude_from_overlap_check</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.exclude_from_overlap_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretend like this occasion doesn’t use any time</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.active_days">
<code class="descname">active_days</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.active_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Days on which this occasion is active</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.weekdays">
<code class="descname">weekdays</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.weekdays" title="Permalink to this definition">¶</a></dt>
<dd><p>Weekdays on which this occasion is active</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.bookings">
<code class="descname">bookings</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.bookings" title="Permalink to this definition">¶</a></dt>
<dd><p>The bookings linked to this occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.dates">
<code class="descname">dates</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.dates" title="Permalink to this definition">¶</a></dt>
<dd><p>The dates associated with this occasion (loaded eagerly)</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.on_date_change">
<code class="descname">on_date_change</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/occasion.html#Occasion.on_date_change"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.on_date_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Date changes are not properly propagated to the observer for
some reason, so we do this manually with a hook.</p>
<p>It’s a bit of a hack, but multiple dates per occasion had to be
added at the last minute..</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.deadline">
<code class="descname">deadline</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.deadline" title="Permalink to this definition">¶</a></dt>
<dd><p>The date until which this occasion may be booked (inclusive).</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.is_permitted_birth_date">
<code class="descname">is_permitted_birth_date</code><span class="sig-paren">(</span><em>birth_date</em>, <em>wiggle_room=365</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/occasion.html#Occasion.is_permitted_birth_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.is_permitted_birth_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if the given birth date is considered to be in
the age range of this occasion.</p>
<p>The date inspected is the date of the first occurrence. In addition
there’s a wiggle room of x days which is applied to the exact age.</p>
<p>By default attendees may be one year too young or too old.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-onegov.activity.collections.activity">
<span id="collections"></span><h2>Collections<a class="headerlink" href="#module-onegov.activity.collections.activity" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-onegov.activity.collections.booking"></span></div>
<div class="section" id="module-onegov.activity.utils">
<span id="utils"></span><h2>Utils<a class="headerlink" href="#module-onegov.activity.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="onegov.activity.utils.merge_ranges">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">merge_ranges</code><span class="sig-paren">(</span><em>ranges</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#merge_ranges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.merge_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges the given list of ranges into a list of ranges including only
exclusive ranges. The ranges are turned into tuples to make them
hashable.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.generate_checksum">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">generate_checksum</code><span class="sig-paren">(</span><em>number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#generate_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.generate_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the modulo 10 checksum as required by Postfinance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The checksum as integer.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.append_checksum">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">append_checksum</code><span class="sig-paren">(</span><em>number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#append_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.append_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the Postfinance modulo 10 checksum to the given number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The given number as string with the checksum appended.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.is_valid_checksum">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">is_valid_checksum</code><span class="sig-paren">(</span><em>number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#is_valid_checksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.is_valid_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the given number and verifys the checksum which is assumed to
be the last digit in the given number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the checksum digit matches the numbers before it.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.as_invoice_code">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">as_invoice_code</code><span class="sig-paren">(</span><em>invoice</em>, <em>username</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#as_invoice_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.as_invoice_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the invoice group and username from an
<code class="xref py py-class docutils literal"><span class="pre">InvoiceItem</span></code> and generates
a hash unique to this invoice/username combination.</p>
<p>There’s no guarantee that this code is unique for an invoice, though
the chance of it overlapping is very very small -&gt; any algorithm
doing some kind of matching has to account for this fact.</p>
<p>We can solve this by introducing a separate invoice record in the future.</p>
<p>The “q” at the beginning is used as a marker for regular expressions
(so it’s a “q”, followed by [a-z0-9]{8}), as well as a version
identifier.</p>
<p>If this code changes be aware that the esr encoding/decoding might have
to be changed as well.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.format_invoice_code">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">format_invoice_code</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#format_invoice_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.format_invoice_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the invoice code and formats it in a human readable way.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.encode_invoice_code">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">encode_invoice_code</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#encode_invoice_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.encode_invoice_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an invoice code and encodes it as a valid ESR reference with
checksum included.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.decode_esr_reference">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">decode_esr_reference</code><span class="sig-paren">(</span><em>reference</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#decode_esr_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.decode_esr_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an ESR reference and decodes it into an invoice code if possible.</p>
<p>Raises an error if the given reference cannot be decoded.</p>
<p>Handles formatted refences as well as unformatted ones.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.format_esr_reference">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">format_esr_reference</code><span class="sig-paren">(</span><em>reference</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#format_esr_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.format_esr_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an ESR reference and formats it in a human-readable way.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.generate_xml">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">generate_xml</code><span class="sig-paren">(</span><em>payments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#generate_xml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.generate_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an xml for import through ISO20022. Used for testing only.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.dates_overlap">
<code class="descclassname">onegov.activity.utils.</code><code class="descname">dates_overlap</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>minutes_between=0</em>, <em>cut_end=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#dates_overlap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.dates_overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if any time tuple in the list of tuples in a overlaps
with a time tuple in b.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.svg" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=OneGov&repo=onegov-docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Verein OneGov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/onegov_activity.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>