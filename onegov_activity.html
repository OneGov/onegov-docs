
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Onegov Activity API &#8212; OneGov Docs 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="onegov-activity-api">
<h1>Onegov Activity API<a class="headerlink" href="#onegov-activity-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-onegov.activity.models.activity">
<span id="models"></span><h2>Models<a class="headerlink" href="#module-onegov.activity.models.activity" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="onegov.activity.models.activity.Activity">
<em class="property">class </em><code class="sig-prename descclassname">onegov.activity.models.activity.</code><code class="sig-name descname">Activity</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/activity.html#Activity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.activity.Activity" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes an activity that is made available to participants on
certain occasions (i.e. dates).</p>
<p>The activity describes the what’s going on, the occasion describes when
and with whom.</p>
<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.id" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal id for references (not public)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A nice id for the url, readable by humans</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.title">
<code class="sig-name descname">title</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.title" title="Permalink to this definition">¶</a></dt>
<dd><p>The title of the activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.order">
<code class="sig-name descname">order</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.order" title="Permalink to this definition">¶</a></dt>
<dd><p>The normalized title for sorting</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.lead">
<code class="sig-name descname">lead</code><em class="property"> = None</em><a class="headerlink" href="#onegov.activity.models.activity.Activity.lead" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the activity briefly</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.text">
<code class="sig-name descname">text</code><em class="property"> = None</em><a class="headerlink" href="#onegov.activity.models.activity.Activity.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the activity in detail</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.thumbnail">
<code class="sig-name descname">thumbnail</code><em class="property"> = None</em><a class="headerlink" href="#onegov.activity.models.activity.Activity.thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>The thumbnail shown in the overview</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.username">
<code class="sig-name descname">username</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.username" title="Permalink to this definition">¶</a></dt>
<dd><p>The user to which this activity belongs to (organiser)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.reporter">
<code class="sig-name descname">reporter</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.reporter" title="Permalink to this definition">¶</a></dt>
<dd><p>The user which initially reported this activity (same as username, but
this value may not change after initialisation)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.location">
<code class="sig-name descname">location</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.location" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the location of the activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.municipality">
<code class="sig-name descname">municipality</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.municipality" title="Permalink to this definition">¶</a></dt>
<dd><p>The municipality in which the activity is held, from the location</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.user">
<code class="sig-name descname">user</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.user" title="Permalink to this definition">¶</a></dt>
<dd><p>Access the user linked to this activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.occasions">
<code class="sig-name descname">occasions</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.occasions" title="Permalink to this definition">¶</a></dt>
<dd><p>The occasions linked to this activity</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.type">
<code class="sig-name descname">type</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.type" title="Permalink to this definition">¶</a></dt>
<dd><p>the type of the item, this can be used to create custom polymorphic
subclasses of this class. See
<a class="reference external" href="http://docs.sqlalchemy.org/en/improve_toc/ orm/extensions/declarative/inheritance.html">http://docs.sqlalchemy.org/en/improve_toc/ orm/extensions/declarative/inheritance.html</a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.activity.Activity.state">
<code class="sig-name descname">state</code><a class="headerlink" href="#onegov.activity.models.activity.Activity.state" title="Permalink to this definition">¶</a></dt>
<dd><p>the state of the activity</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-onegov.activity.models.booking"></span><dl class="class">
<dt id="onegov.activity.models.booking.Booking">
<em class="property">class </em><code class="sig-prename descclassname">onegov.activity.models.booking.</code><code class="sig-name descname">Booking</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking" title="Permalink to this definition">¶</a></dt>
<dd><p>Bookings are created by users for occasions.</p>
<p>Initially, bookings are open. In this state they represent a “wish” rather
than booking.</p>
<p>Because bookings are wishes initially, they get a priority as well as
a group code which links multiple bookings by multiple users together.</p>
<p>They system will try to figure out the best booking using the priority
as well as the group code.</p>
<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.id" title="Permalink to this definition">¶</a></dt>
<dd><p>the public id of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.username">
<code class="sig-name descname">username</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.username" title="Permalink to this definition">¶</a></dt>
<dd><p>the user owning the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.priority">
<code class="sig-name descname">priority</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.priority" title="Permalink to this definition">¶</a></dt>
<dd><p>the priority of the booking, a higher number = a higher priority</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.group_code">
<code class="sig-name descname">group_code</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.group_code" title="Permalink to this definition">¶</a></dt>
<dd><p>the group code of the booking, if missing the booking is not in a group</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.attendee_id">
<code class="sig-name descname">attendee_id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.attendee_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the attendee behind this booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.occasion_id">
<code class="sig-name descname">occasion_id</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.occasion_id" title="Permalink to this definition">¶</a></dt>
<dd><p>the occasion this booking belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.cost">
<code class="sig-name descname">cost</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>the cost of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.score">
<code class="sig-name descname">score</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.score" title="Permalink to this definition">¶</a></dt>
<dd><p>the calculated score of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.state">
<code class="sig-name descname">state</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.state" title="Permalink to this definition">¶</a></dt>
<dd><p>the state of the booking</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.booking.Booking.user">
<code class="sig-name descname">user</code><a class="headerlink" href="#onegov.activity.models.booking.Booking.user" title="Permalink to this definition">¶</a></dt>
<dd><p>access the user linked to this booking</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.group_code_count">
<code class="sig-name descname">group_code_count</code><span class="sig-paren">(</span><em class="sig-param">states=('open'</em>, <em class="sig-param">'accepted')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.group_code_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.group_code_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of bookings with the same group code.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.period_bound_booking_state">
<code class="sig-name descname">period_bound_booking_state</code><span class="sig-paren">(</span><em class="sig-param">period</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.period_bound_booking_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.period_bound_booking_state" title="Permalink to this definition">¶</a></dt>
<dd><p>During pre-booking we don’t show the actual state of the booking,
unless the occasion was cancelled, otherwise the user might see
accepted bookings at a point where those states are not confirmed yet.</p>
<p>This methods interprets the period/state accordingly.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.provisional_booking_cost">
<code class="sig-name descname">provisional_booking_cost</code><span class="sig-paren">(</span><em class="sig-param">period=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.provisional_booking_cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.provisional_booking_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>The costs of the final booking, including the booking costs
of the period (if not all-inclusive).</p>
<p>This cost is written to the booking.cost when the period is
confirmed.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.set_priority_bit">
<code class="sig-name descname">set_priority_bit</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">bit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.set_priority_bit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.set_priority_bit" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the priority, setting the the nth bit from the right to
the value of <code class="docutils literal notranslate"><span class="pre">bit</span></code> (index/n begins at 0).</p>
<p>The first bit (index=0) is reserved for starring/unstarring.
The second bit (index=1) is reserved for nobble/unnobble.</p>
<p>As a result, starring is less influental than locking.</p>
<p>To give some context: Starring is used by the attendees to select
which bookings they favor. Nobbling is used by administrators to force
certain bookings to be preferred.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.booking.Booking.star">
<code class="sig-name descname">star</code><span class="sig-paren">(</span><em class="sig-param">max_stars=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/booking.html#Booking.star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.booking.Booking.star" title="Permalink to this definition">¶</a></dt>
<dd><p>Stars the current booking, up to a limit per period and attendee.</p>
<p>Starring sets the star-bit to 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if successful (or already set), False if over limit.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-onegov.activity.models.occasion"></span><dl class="class">
<dt id="onegov.activity.models.occasion.Occasion">
<em class="property">class </em><code class="sig-prename descclassname">onegov.activity.models.occasion.</code><code class="sig-name descname">Occasion</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/occasion.html#Occasion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.occasion.Occasion" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes a single occurrence of an Activity. “Occurence” would have
been a good word for it too, but that’s used by onegov.event.</p>
<p>So occasion it is.</p>
<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.id" title="Permalink to this definition">¶</a></dt>
<dd><p>the public id of this occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.meeting_point">
<code class="sig-name descname">meeting_point</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.meeting_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the meeting point of the occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.age">
<code class="sig-name descname">age</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.age" title="Permalink to this definition">¶</a></dt>
<dd><p>The expected age of participants</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.spots">
<code class="sig-name descname">spots</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.spots" title="Permalink to this definition">¶</a></dt>
<dd><p>The expected number of participants</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.note">
<code class="sig-name descname">note</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.note" title="Permalink to this definition">¶</a></dt>
<dd><p>A note about the occurrence</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.cost">
<code class="sig-name descname">cost</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.cost" title="Permalink to this definition">¶</a></dt>
<dd><p>The cost of the occasion (max value is 100’000.00), the currency is
assumed to be CHF as this system will probably never be used outside
Switzerland</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.activity_id">
<code class="sig-name descname">activity_id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.activity_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The activity this occasion belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.period_id">
<code class="sig-name descname">period_id</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.period_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The period this occasion belongs to</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.cancelled">
<code class="sig-name descname">cancelled</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.cancelled" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the occasion has been cancelled</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.duration">
<code class="sig-name descname">duration</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The duration defined by the associated dates</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.order">
<code class="sig-name descname">order</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.order" title="Permalink to this definition">¶</a></dt>
<dd><p>The default order</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.exclude_from_overlap_check">
<code class="sig-name descname">exclude_from_overlap_check</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.exclude_from_overlap_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Pretend like this occasion doesn’t use any time</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.exempt_from_booking_limit">
<code class="sig-name descname">exempt_from_booking_limit</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.exempt_from_booking_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>This occasion can be booked, even if the booking limit has been reached
(does not currently apply to the matching, only to confirmed periods)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.active_days">
<code class="sig-name descname">active_days</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.active_days" title="Permalink to this definition">¶</a></dt>
<dd><p>Days on which this occasion is active</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.weekdays">
<code class="sig-name descname">weekdays</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.weekdays" title="Permalink to this definition">¶</a></dt>
<dd><p>Weekdays on which this occasion is active</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.bookings">
<code class="sig-name descname">bookings</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.bookings" title="Permalink to this definition">¶</a></dt>
<dd><p>The bookings linked to this occasion</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.dates">
<code class="sig-name descname">dates</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.dates" title="Permalink to this definition">¶</a></dt>
<dd><p>The dates associated with this occasion (loaded eagerly)</p>
</dd></dl>

<dl class="attribute">
<dt id="onegov.activity.models.occasion.Occasion.needs">
<code class="sig-name descname">needs</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.needs" title="Permalink to this definition">¶</a></dt>
<dd><p>The needs associated with this occasion</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.on_date_change">
<code class="sig-name descname">on_date_change</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/models/occasion.html#Occasion.on_date_change"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.on_date_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Date changes are not properly propagated to the observer for
some reason, so we do this manually with a hook.</p>
<p>It’s a bit of a hack, but multiple dates per occasion had to be
added at the last minute..</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.anti_affinity_group">
<em class="property">property </em><code class="sig-name descname">anti_affinity_group</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.anti_affinity_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the activity_id/period_id as an anti-affinity group to ensure
that an attendee is never given two occasions of the same activity
in a single period.</p>
<p>If that is wanted, the attendee is meant to do this after the
matching has been done, with a direct booking.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.deadline">
<em class="property">property </em><code class="sig-name descname">deadline</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.deadline" title="Permalink to this definition">¶</a></dt>
<dd><p>The date until which this occasion may be booked (inclusive).</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.models.occasion.Occasion.cancellation_deadline">
<em class="property">property </em><code class="sig-name descname">cancellation_deadline</code><a class="headerlink" href="#onegov.activity.models.occasion.Occasion.cancellation_deadline" title="Permalink to this definition">¶</a></dt>
<dd><p>The date until which bookings of this occasion may be cancelled
by a mere member (inclusive).</p>
<p>If mere members are not allowed to do that, the deadline returns None.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-onegov.activity.collections.activity">
<span id="collections"></span><h2>Collections<a class="headerlink" href="#module-onegov.activity.collections.activity" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="onegov.activity.collections.activity.ActivityCollection">
<em class="property">class </em><code class="sig-prename descclassname">onegov.activity.collections.activity.</code><code class="sig-name descname">ActivityCollection</code><span class="sig-paren">(</span><em class="sig-param">session</em>, <em class="sig-param">type='*'</em>, <em class="sig-param">page=0</em>, <em class="sig-param">filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.subset">
<code class="sig-name descname">subset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection.subset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an SQLAlchemy query containing all records that should
be considered for pagination.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.page_index">
<em class="property">property </em><code class="sig-name descname">page_index</code><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.page_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current page index (starting at 0).</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.page_by_index">
<code class="sig-name descname">page_by_index</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection.page_by_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.page_by_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the page at the given index. A page here means an instance
of the class inheriting from the <code class="docutils literal notranslate"><span class="pre">Pagination</span></code> base class.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.query_base">
<code class="sig-name descname">query_base</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection.query_base"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.query_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the query based used by <code class="xref py py-meth docutils literal notranslate"><span class="pre">query()</span></code>. Overriding this
function is useful to apply a general filter to the query before
any other filter is applied.</p>
<p>For example, a policy can be enforced that only allows public
activites.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.for_filter">
<code class="sig-name descname">for_filter</code><span class="sig-paren">(</span><em class="sig-param">**keywords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection.for_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.for_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new collection instance.</p>
<p>The given tag is excluded if already in the list, included if not
yet in the list. Same goes for the given state.</p>
<p>Note that dateranges are excluded only if they match exactly. That is
we don’t care about overlaps at all. If the same exact daterange is
found in the filter, it is excluded.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.used_tags">
<em class="property">property </em><code class="sig-name descname">used_tags</code><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.used_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the tags used on <em>all</em> activites of
the current type.</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.used_municipalities">
<em class="property">property </em><code class="sig-name descname">used_municipalities</code><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.used_municipalities" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the municipalities on <em>all</em> activites of
the current type</p>
</dd></dl>

<dl class="method">
<dt id="onegov.activity.collections.activity.ActivityCollection.get_unique_name">
<code class="sig-name descname">get_unique_name</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/collections/activity.html#ActivityCollection.get_unique_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.collections.activity.ActivityCollection.get_unique_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a desired name, finds a variant of that name that’s not
yet used. So if ‘foobar’ is already used, ‘foobar-1’ will be returned.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-onegov.activity.collections.booking"></span></div>
<div class="section" id="module-onegov.activity.utils">
<span id="utils"></span><h2>Utils<a class="headerlink" href="#module-onegov.activity.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="onegov.activity.utils.merge_ranges">
<code class="sig-prename descclassname">onegov.activity.utils.</code><code class="sig-name descname">merge_ranges</code><span class="sig-paren">(</span><em class="sig-param">ranges</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#merge_ranges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.merge_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges the given list of ranges into a list of ranges including only
exclusive ranges. The ranges are turned into tuples to make them
hashable.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.generate_xml">
<code class="sig-prename descclassname">onegov.activity.utils.</code><code class="sig-name descname">generate_xml</code><span class="sig-paren">(</span><em class="sig-param">payments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#generate_xml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.generate_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an xml for import through ISO20022. Used for testing only.</p>
</dd></dl>

<dl class="function">
<dt id="onegov.activity.utils.dates_overlap">
<code class="sig-prename descclassname">onegov.activity.utils.</code><code class="sig-name descname">dates_overlap</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">minutes_between=0</em>, <em class="sig-param">cut_end=True</em>, <em class="sig-param">alignment=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onegov/activity/utils.html#dates_overlap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onegov.activity.utils.dates_overlap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true if any time tuple in the list of tuples in a overlaps
with a time tuple in b.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.svg" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=OneGov&repo=onegov-docs&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Verein OneGov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/onegov_activity.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>